 @{
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

@if (ViewBag.TenKH != null)
{
    <!-- Welcome Message -->
    <div class="bg-blue-50 border-b border-blue-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fas fa-sun text-yellow-500 mr-2"></i>
                    <span class="text-blue-800 font-medium">Chào mừng trở lại, @ViewBag.TenKH!</span>
                </div>
            </div>
        </div>
    </div>
}

<!-- Hero Section with Search -->
<section class="bg-gradient-to-br from-blue-50 to-indigo-100 py-12 md:py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Hero Title -->
        <div class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-4">
                Đặt vé máy bay <span class="text-blue-600">dễ dàng</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto">
                Tìm kiếm và đặt vé máy bay với giá tốt nhất. Hàng ngàn chuyến bay đang chờ bạn khám phá.
            </p>
        </div>

        <!-- Search Form -->
        <form class="bg-white rounded-2xl shadow-xl p-6 md:p-8 max-w-5xl mx-auto" action="@Url.Action("TimChuyen","User")" method="post">
            <!-- Trip Type -->
            <div class="flex flex-wrap gap-4 mb-6">
                <label class="flex items-center">

                    <input type="radio" name="trip-type" id="trip-type" value="Khứ hồi" class="mr-2 text-blue-600" onchange="toggleReturnDate()">
                    <span class="text-gray-700 font-medium">Khứ hồi</span>
                </label>
                <label class="flex items-center">
                    <input type="radio" name="trip-type" id="trip-type" value="Một chiều" checked class="mr-2 text-blue-600" onchange="toggleReturnDate()">

                    <span class="text-gray-700 font-medium">Một chiều</span>
                </label>
            </div>

            <!-- Search Fields -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                <!-- From -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-plane-departure text-blue-600 mr-1"></i>Điểm đi
                    </label>

                    <input type="text" placeholder="Hà Nội" name="from" id="from-input"

                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>

                <!-- To -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-plane-arrival text-blue-600 mr-1"></i>Điểm đến
                    </label>

                    <input type="text" placeholder="TP.HCM" name="to" id="to-input"

                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>

                <!-- Departure Date -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-calendar text-blue-600 mr-1"></i>Ngày đi
                    </label>
                    <input type="date" name="ngaydi"
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           value="@DateTime.Now.ToString("yyyy-MM-dd")">
                </div>

                <!-- Return Date -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-calendar text-blue-600 mr-1"></i>Ngày về
                    </label>

                    <input type="date" id="return-date" name="ngayve"

                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>

                <!-- Passengers Counter -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-users text-blue-600 mr-1"></i>Hành khách
                    </label>
                    <div class="flex items-center border border-gray-300 rounded-lg">
                        <button type="button" onclick="decreasePassengers()"
                                class="px-3 py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-l-lg transition-colors">
                            <i class="fas fa-minus"></i>
                        </button>

                        <input type="number" id="passenger-count" value="1" min="1" max="9" name="passenger"

                               class="w-full text-center py-3 border-0 focus:ring-0 focus:outline-none" readonly>
                        <button type="button" onclick="increasePassengers()"
                                class="px-3 py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-r-lg transition-colors">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Search Button -->
            <div class="text-center">
                <button type="submit"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-12 rounded-xl transition-colors text-lg shadow-lg">
                    <i class="fas fa-search mr-2"></i>Tìm chuyến bay
                </button>
            </div>
        </form>
    </div>
</section>

<!-- Hot Deals Banner -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Chuyến bay hot</h2>
            <p class="text-lg text-gray-600">Những ưu đãi tốt nhất dành cho bạn</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="bg-gradient-to-r from-orange-400 to-pink-500 rounded-2xl p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm font-medium">Khuyến mãi</span>
                        <span class="text-2xl font-bold">-30%</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Hà Nội → Bangkok</h3>
                    <p class="mb-4">Khám phá xứ sở chùa vàng</p>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-bold">Từ 2.500.000đ</span>
                        <button onclick="fillFormFromDeal('Hà Nội (HAN)', 'Bangkok (BKK)')" class="bg-white text-orange-500 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                            Đặt ngay
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm font-medium">Siêu rẻ</span>
                        <span class="text-2xl font-bold">-25%</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">TP.HCM → Singapore</h3>
                    <p class="mb-4">Thành phố sư tử hiện đại</p>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-bold">Từ 3.200.000đ</span>
                        <button onclick="fillFormFromDeal('TP.HCM (SGN)', 'Singapore (SIN)')" class="bg-white text-blue-500 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                            Đặt ngay
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-green-500 to-teal-600 rounded-2xl p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm font-medium">Mới</span>
                        <span class="text-2xl font-bold">-20%</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Đà Nẵng → Seoul</h3>
                    <p class="mb-4">Xứ sở kim chi quyến rũ</p>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-bold">Từ 4.800.000đ</span>
                        <button onclick="fillFormFromDeal('Đà Nẵng (DAD)', 'Seoul (ICN)')" class="bg-white text-green-500 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                            Đặt ngay
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Promotion Suggestions -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Gợi ý khuyến mãi</h2>
            <p class="text-lg text-gray-600">Đừng bỏ lỡ những ưu đãi hấp dẫn</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Promo 1 -->
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                <div class="w-full h-48 bg-gray-300"></div>
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <span class="bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-medium mr-3">Flash Sale</span>
                        <span class="text-gray-500 text-sm">Còn 2 ngày</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Kỳ nghỉ biển tuyệt vời</h3>
                    <p class="text-gray-600 mb-4">Giảm đến 40% cho các chuyến bay đến các điểm du lịch biển nổi tiếng</p>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors font-medium">
                        Xem chi tiết
                    </button>
                </div>
            </div>

            <!-- Promo 2 -->
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                <div class="w-full h-48 bg-gray-300"></div>
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <span class="bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm font-medium mr-3">Mới</span>
                        <span class="text-gray-500 text-sm">Có hiệu lực ngay</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Khám phá thành phố</h3>
                    <p class="text-gray-600 mb-4">Ưu đãi đặc biệt cho các chuyến bay nội địa, tiết kiệm đến 25%</p>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors font-medium">
                        Xem chi tiết
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>



<script>
    function increasePassengers() {
        const input = document.getElementById('passenger-count');
        let currentValue = parseInt(input.value);
        if (currentValue < 9) {
            input.value = currentValue + 1;
        }
    }

    function decreasePassengers() {
        const input = document.getElementById('passenger-count');
        let currentValue = parseInt(input.value);
        if (currentValue > 1) {
            input.value = currentValue - 1;
        }
    }

    function toggleReturnDate() {
        const returnDateInput = document.getElementById('return-date');

        const oneWayRadio = document.querySelector('input[value="Một chiều"]');


        if (oneWayRadio.checked) {
            returnDateInput.disabled = true;
            returnDateInput.value = '';
            returnDateInput.classList.add('bg-gray-100', 'cursor-not-allowed');
            returnDateInput.classList.remove('focus:ring-2', 'focus:ring-blue-500');
        } else {
            returnDateInput.disabled = false;

            returnDateInput.required = true;

            returnDateInput.classList.remove('bg-gray-100', 'cursor-not-allowed');
            returnDateInput.classList.add('focus:ring-2', 'focus:ring-blue-500');
        }
    }

    function fillFormFromDeal(from, to) {
        document.getElementById('from-input').value = from;
        document.getElementById('to-input').value = to;

        const today = new Date();
        const nextWeek = new Date(today);
        nextWeek.setDate(today.getDate() + 7);
        const twoWeeksLater = new Date(today);
        twoWeeksLater.setDate(today.getDate() + 14);

        const formatDate = (date) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        };

        document.getElementById('departure-date').value = formatDate(nextWeek);
        document.getElementById('return-date').value = formatDate(twoWeeksLater);

        const roundTripRadio = document.querySelector('input[value="Một chiều"]');
        roundTripRadio.checked = true;
        toggleReturnDate();

        document.getElementById('from-input').classList.add('ring-2', 'ring-blue-500');
        document.getElementById('to-input').classList.add('ring-2', 'ring-blue-500');

        setTimeout(() => {
            document.getElementById('from-input').classList.remove('ring-2', 'ring-blue-500');
            document.getElementById('to-input').classList.remove('ring-2', 'ring-blue-500');
        }, 2000);

        document.getElementById('search-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function () {
        toggleReturnDate();
    });

</script>

