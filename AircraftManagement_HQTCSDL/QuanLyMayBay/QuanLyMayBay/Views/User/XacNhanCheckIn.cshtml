
@model QuanLyMayBay.Models.CheckInViewModel
@{
    ViewBag.Title = "XacNhanCheckIn";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#1E40AF',
                    'primary-dark': '#1E3A8A',
                    'primary-light': '#3B82F6',
                    'blue-50': '#EFF6FF',
                    'blue-100': '#DBEAFE'
                }
            }
        }
    }
</script>
<header class="bg-white shadow-sm border-b border-blue-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
                <button onclick="window.history.back()" class="p-2 hover:bg-blue-50 rounded-lg transition-colors">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-primary">Chi Tiết Check-in</h1>
                    <p class="text-sm sm:text-base text-gray-600 mt-1">Xác nhận thông tin và nhận thẻ lên máy bay</p>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
    <div id="step-1" class="step-content">
        <div class="mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-gray-900">Bước 1: Xác nhận thông tin chuyến bay</h2>
                <span class="text-sm font-semibold text-primary bg-blue-50 px-3 py-1 rounded-full">1/2</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-primary h-2 rounded-full transition-all duration-500" style="width: 50%"></div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white rounded-xl shadow-md border border-blue-100 overflow-hidden">
                    <div class="bg-gradient-to-r from-primary to-primary-light p-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="px-3 py-1 bg-white/20 backdrop-blur-sm text-white text-sm font-bold rounded-full">@Model.HangGhe.ToUpper()</span>
                            <span class="text-white text-sm font-semibold">Mã vé: @Model.MaVe</span>
                        </div>
                        <div class="flex items-center justify-between text-white">
                            <div class="text-center">
                                <p class="text-4xl font-bold mb-1">@Model.SanBayDiMa</p>
                                <p class="text-sm opacity-90">@Model.SanBayDiThanhPho</p>
                                <p class="text-xs opacity-75 mt-1">@Model.SanBayDiTen</p>
                            </div>
                            <div class="flex-1 px-6">
                                <div class="flex flex-col items-center">
                                    <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                    </svg>
                                    <div class="w-full h-0.5 bg-white/40"></div>
                                    <p class="text-xs mt-2 opacity-90">@Model.ThoiGianBay</p>
                                </div>
                            </div>
                            <div class="text-center">
                                <p class="text-4xl font-bold mb-1">@Model.SanBayDenMa</p>
                                <p class="text-sm opacity-90">@Model.SanBayDenThanhPho</p>
                                <p class="text-xs opacity-75 mt-1">@Model.SanBayDenTen</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-6 space-y-4">
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                            <div>
                                <p class="text-xs text-gray-500 mb-1">Mã chuyến bay</p>
                                <p class="text-base font-bold text-gray-900">@Model.MaCB</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">Ngày bay</p>
                                <p class="text-base font-bold text-gray-900">@Model.GioCatCanh.ToString("dd/MM/yyyy")</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">Giờ khởi hành</p>
                                <p class="text-base font-bold text-gray-900">@Model.GioCatCanh.ToString("HH:mm")</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">Giờ đến</p>
                                <p class="text-base font-bold text-gray-900">@Model.GioHaCanh.ToString("HH:mm")</p>
                            </div>
                        </div>

                        <div class="border-t border-gray-200 pt-4">
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                <div>
                                    <p class="text-xs text-gray-500 mb-1">Mã vé</p>
                                    <p class="text-base font-bold text-primary">@Model.MaVe</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 mb-1">Số ghế</p>
                                    <p class="text-base font-bold text-primary">@Model.SoGhe</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 mb-1">Hạng vé</p>
                                    <p class="text-base font-bold text-gray-900">@Model.HangGhe</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md border border-blue-100 p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Thông tin hành khách
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-semibold text-gray-900">Hành khách 1</span>
                                <span class="text-xs bg-blue-600 text-white px-2 py-1 rounded-full">Người lớn</span>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Họ và tên</p>
                                    <p class="text-sm font-bold text-gray-900">@Model.TenHanhKhach</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Giới tính</p>
                                    <p class="text-sm font-semibold text-gray-900">@(Model.GioiTinh == "Nam" ? "Nam" : Model.GioiTinh == "Nữ" ? "Nữ" : Model.GioiTinh)</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Ngày sinh</p>
                                    <p class="text-sm font-semibold text-gray-900">@(Model.NgaySinh.HasValue ? Model.NgaySinh.Value.ToString("dd/MM/yyyy") : "N/A")</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Quốc tịch</p>
                                    <p class="text-sm font-semibold text-gray-900">@(Model.QuocGia ?? "N/A")</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Số điện thoại</p>
                                    <p class="text-sm font-semibold text-gray-900">@(Model.SDT ?? "N/A")</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-600 mb-1">Email</p>
                                    <p class="text-sm font-semibold text-gray-900">@(Model.Email ?? "N/A")</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md border border-blue-100 p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Hành lý
                    </h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                                </svg>
                                <div>
                                    <p class="text-sm font-semibold text-gray-900">Hành lý xách tay</p>
                                    <p class="text-xs text-gray-600">Tối đa @(Model.HangLyXachTay ?? 0)kg</p>
                                </div>
                            </div>
                            <span class="text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded">Đã bao gồm</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                </svg>
                                <div>
                                    <p class="text-sm font-semibold text-gray-900">Hành lý ký gửi</p>
                                    <p class="text-xs text-gray-600">@(Model.HangLyKyGui ?? 0)kg</p>
                                </div>
                            </div>
                            <span class="text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded">Đã bao gồm</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md border border-blue-100 p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Xác nhận điều khoản</h3>
                    <div class="space-y-3">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" required class="w-5 h-5 text-primary rounded border-gray-300 focus:ring-primary mt-1">
                            <span class="text-sm text-gray-700">Tôi xác nhận rằng tất cả thông tin trên là chính xác và tôi đã đọc các điều khoản và điều kiện.</span>
                        </label>
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" required class="w-5 h-5 text-primary rounded border-gray-300 focus:ring-primary mt-1">
                            <span class="text-sm text-gray-700">Tôi hiểu rằng sau khi check-in, tôi không thể thay đổi thông tin chuyến bay.</span>
                        </label>
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" required class="w-5 h-5 text-primary rounded border-gray-300 focus:ring-primary mt-1">
                            <span class="text-sm text-gray-700">Tôi xác nhận hành lý của tôi không chứa các vật phẩm nguy hiểm hoặc bị cấm.</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-md border border-blue-100 p-6 sticky top-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Tóm tắt check-in</h3>
                    <div class="space-y-3 mb-6">
                        <div class="flex items-center gap-2 text-sm">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">Thông tin chuyến bay</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm">
                            <svg class="w-5 h-5 text-gray-300 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-400">Nhận thẻ lên máy bay</span>
                        </div>
                    </div>

                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <div class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <p class="text-sm font-semibold text-blue-900 mb-1">Lưu ý quan trọng</p>
                                <p class="text-xs text-blue-700">Vui lòng kiểm tra kỹ thông tin trước khi tiếp tục. Sau khi check-in, bạn không thể thay đổi thông tin.</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <h4 class="text-sm font-semibold text-gray-900 mb-3">Chi tiết chuyến bay</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Chuyến bay</span>
                                <span class="font-semibold text-gray-900">@Model.MaCB</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Số ghế</span>
                                <span class="font-semibold text-primary">@Model.SoGhe</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Hành lý</span>
                                <span class="font-semibold text-gray-900">@((Model.HangLyXachTay ?? 0) + (Model.HangLyKyGui ?? 0))kg</span>
                            </div>
                        </div>
                    </div>

                    <button onclick="confirmCheckIn()" class="w-full px-6 py-3 bg-gradient-to-r from-primary to-primary-light text-white rounded-lg font-bold hover:from-primary-dark hover:to-primary transition-all shadow-md hover:shadow-lg">
                        Xác nhận Check-in
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="step-2" class="step-content hidden">
        <div class="mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-gray-900">Bước 2: Thẻ lên máy bay</h2>
                <span class="text-sm font-semibold text-green-600 bg-green-50 px-3 py-1 rounded-full">2/2 - Hoàn thành</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-green-600 h-2 rounded-full transition-all duration-500" style="width: 100%"></div>
            </div>
        </div>

        <div class="bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl shadow-lg p-6 text-white mb-6">
            <div class="flex items-center gap-3">
                <svg class="w-12 h-12 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <div>
                    <h3 class="font-bold text-2xl mb-1">Check-in thành công!</h3>
                    <p class="text-sm opacity-95">Thẻ lên máy bay của bạn đã sẵn sàng. Vui lòng tải xuống hoặc in thẻ.</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-xl border-2 border-primary overflow-hidden">
                    <div class="bg-gradient-to-r from-primary to-primary-light p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-2xl font-bold mb-1">BOARDING PASS</h3>
                                <p class="text-sm opacity-90">Thẻ lên máy bay điện tử</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg">
                                <p class="text-xs opacity-75">Mã đặt chỗ</p>
                                <p class="text-lg font-bold">ABC123</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <div class="mb-6">
                                    <p class="text-xs text-gray-500 mb-2">Hành khách</p>
                                    <p class="text-2xl font-bold text-gray-900">@Model.TenHanhKhach</p>
                                </div>

                                <div class="grid grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1">Từ</p>
                                        <p class="text-3xl font-bold text-primary">@Model.SanBayDiMa</p>
                                        <p class="text-sm text-gray-600">@Model.SanBayDiThanhPho</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1">Đến</p>
                                        <p class="text-3xl font-bold text-primary">@Model.SanBayDenMa</p>
                                        <p class="text-sm text-gray-600">@Model.SanBayDenThanhPho</p>
                                    </div>
                                </div>

                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1">Ngày</p>
                                        <p class="text-base font-bold text-gray-900">@Model.GioCatCanh.ToString("dd/MM/yyyy")</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1">Giờ bay</p>
                                        <p class="text-base font-bold text-gray-900">@Model.GioCatCanh.ToString("HH:mm")</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1">Mã vé</p>
                                        <p class="text-base font-bold text-primary">@Model.MaVe</p>
                                    </div>
                                </div>
                            </div>

                            <div class="flex flex-col items-center justify-center">
                                <div class="bg-white p-4 rounded-xl shadow-lg border-2 border-gray-200 mb-4">
                                    <svg class="w-48 h-48" viewBox="0 0 200 200">
                                        <rect x="0" y="0" width="200" height="200" fill="white" />
                                        <rect x="20" y="20" width="20" height="20" fill="black" />
                                        <rect x="40" y="20" width="20" height="20" fill="black" />
                                        <rect x="80" y="20" width="20" height="20" fill="black" />
                                        <rect x="140" y="20" width="20" height="20" fill="black" />
                                        <rect x="160" y="20" width="20" height="20" fill="black" />
                                        <rect x="180" y="20" width="20" height="20" fill="black" />
                                        <rect x="20" y="40" width="20" height="20" fill="black" />
                                        <rect x="100" y="40" width="20" height="20" fill="black" />
                                        <rect x="140" y="40" width="20" height="20" fill="black" />
                                        <rect x="180" y="40" width="20" height="20" fill="black" />
                                        <rect x="20" y="60" width="20" height="20" fill="black" />
                                        <rect x="60" y="60" width="20" height="20" fill="black" />
                                        <rect x="80" y="60" width="20" height="20" fill="black" />
                                        <rect x="100" y="60" width="20" height="20" fill="black" />
                                        <rect x="140" y="60" width="20" height="20" fill="black" />
                                        <rect x="180" y="60" width="20" height="20" fill="black" />
                                        <rect x="20" y="80" width="20" height="20" fill="black" />
                                        <rect x="60" y="80" width="20" height="20" fill="black" />
                                        <rect x="100" y="80" width="20" height="20" fill="black" />
                                        <rect x="140" y="80" width="20" height="20" fill="black" />
                                        <rect x="180" y="80" width="20" height="20" fill="black" />
                                        <rect x="20" y="100" width="20" height="20" fill="black" />
                                        <rect x="60" y="100" width="20" height="20" fill="black" />
                                        <rect x="100" y="100" width="20" height="20" fill="black" />
                                        <rect x="140" y="100" width="20" height="20" fill="black" />
                                        <rect x="180" y="100" width="20" height="20" fill="black" />
                                        <rect x="20" y="120" width="20" height="20" fill="black" />
                                        <rect x="100" y="120" width="20" height="20" fill="black" />
                                        <rect x="140" y="120" width="20" height="20" fill="black" />
                                        <rect x="180" y="120" width="20" height="20" fill="black" />
                                        <rect x="20" y="140" width="20" height="20" fill="black" />
                                        <rect x="40" y="140" width="20" height="20" fill="black" />
                                        <rect x="80" y="140" width="20" height="20" fill="black" />
                                        <rect x="140" y="140" width="20" height="20" fill="black" />
                                        <rect x="160" y="140" width="20" height="20" fill="black" />
                                        <rect x="180" y="140" width="20" height="20" fill="black" />
                                        <rect x="60" y="160" width="20" height="20" fill="black" />
                                        <rect x="80" y="160" width="20" height="20" fill="black" />
                                        <rect x="100" y="160" width="20" height="20" fill="black" />
                                        <rect x="120" y="160" width="20" height="20" fill="black" />
                                        <rect x="60" y="180" width="20" height="20" fill="black" />
                                        <rect x="100" y="180" width="20" height="20" fill="black" />
                                        <rect x="120" y="180" width="20" height="20" fill="black" />
                                    </svg>
                                </div>
                                <p class="text-xs text-gray-500 text-center">Quét mã QR tại cổng lên máy bay</p>
                            </div>
                        </div>

                        <div class="border-t-2 border-dashed border-gray-300 pt-6">
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                <div class="text-center">
                                    <p class="text-xs text-gray-500 mb-1">Chuyến bay</p>
                                    <p class="text-lg font-bold text-gray-900">@Model.MaCB</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-500 mb-1">Số ghế</p>
                                    <p class="text-lg font-bold text-primary">@Model.SoGhe</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-500 mb-1">Hạng vé</p>
                                    <p class="text-lg font-bold text-gray-900">@Model.HangGhe</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-500 mb-1">Trình tự lên máy bay</p>
                                    <p class="text-lg font-bold text-gray-900">Zone 2</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4">
                            <div class="flex items-start gap-2">
                                <svg class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <p class="text-sm font-semibold text-amber-900 mb-1">Lưu ý quan trọng</p>
                                    <ul class="text-xs text-amber-800 space-y-1">
                                        <li>• Có mặt tại cổng lên máy bay trước 30 phút</li>
                                        <li>• Mang theo giấy tờ tùy thân hợp lệ</li>
                                        <li>• Cổng đóng 15 phút trước giờ khởi hành</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-md border border-blue-100 p-6 space-y-4 sticky top-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Tải thẻ lên máy bay</h3>

                    <button class="w-full px-6 py-3 bg-gradient-to-r from-primary to-primary-light text-white rounded-lg font-bold hover:from-primary-dark hover:to-primary transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Tải PDF
                    </button>

                    <button class="w-full px-6 py-3 bg-white border-2 border-primary text-primary rounded-lg font-bold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        In thẻ
                    </button>

                    <button class="w-full px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                        Gửi qua Email
                    </button>

                    <div class="border-t border-gray-200 pt-4 mt-4">
                        <h4 class="text-sm font-semibold text-gray-900 mb-3">Chia sẻ</h4>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="px-4 py-2 bg-blue-50 text-primary rounded-lg text-sm font-semibold hover:bg-blue-100 transition-colors flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                                </svg>
                                Facebook
                            </button>
                            <button class="px-4 py-2 bg-blue-50 text-primary rounded-lg text-sm font-semibold hover:bg-blue-100 transition-colors flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z" />
                                </svg>
                                WhatsApp
                            </button>
                        </div>
                    </div>

                    <div class="bg-blue-50 rounded-lg p-4 mt-4">
                        <div class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <p class="text-sm font-semibold text-blue-900 mb-1">Mẹo hữu ích</p>
                                <p class="text-xs text-blue-700">Lưu thẻ lên máy bay vào ví điện tử của điện thoại để truy cập nhanh hơn tại sân bay.</p>
                            </div>
                        </div>
                    </div>

                    <button onclick="window.location.href='@Url.Action("CheckIn", "User")'" class="w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 mt-4">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                        Quay về danh sách vé
                    </button>
                </div>
            </div>
        </div>

        <div class="mt-6 text-center">
            <a href="@Url.Action("CheckIn", "User")" class="text-gray-500 hover:text-primary font-medium transition-colors">
                &larr; Quay lại danh sách vé
            </a>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
function confirmCheckIn() {
    // Kiểm tra checkbox điều khoản
    var checkboxes = document.querySelectorAll('input[type="checkbox"][required]');
    var allChecked = true;
    checkboxes.forEach(function(checkbox) {
        if (!checkbox.checked) {
            allChecked = false;
        }
    });

    if (!allChecked) {
        alert('Vui lòng đồng ý với tất cả các điều khoản!');
        return;
    }

    if (!confirm('Bạn có chắc muốn check-in cho vé này?')) {
        return;
    }
    var btn = event.target;
    btn.disabled = true;
    btn.innerHTML = '<svg class="w-5 h-5 animate-spin inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Đang xử lý...';
    $.ajax({
        url: '@Url.Action("ThucHienCheckIn", "User")',
        type: 'POST',
        data: { maVe: '@Model.MaVe' },
        success: function(response) {
            if (response.success) {
                // Check-in thành công → Chuyển sang bước 2
                alert(response.message);
                goToStep(2);
                btn.disabled = false;
                btn.innerHTML = 'Xác nhận Check-in';
            } else {
                alert(response.message);
                btn.disabled = false;
                btn.innerHTML = 'Xác nhận Check-in';
            }
        },
        error: function() {
            alert('Có lỗi xảy ra. Vui lòng thử lại!');
            btn.disabled = false;
            btn.innerHTML = 'Xác nhận Check-in';
        }
    });
}
    </script>
</main>

<script>
    function goToStep(step) {
        document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
        document.getElementById('step-' + step).classList.remove('hidden');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>
